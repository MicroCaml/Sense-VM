not : Int -> Int
not 1 = 0
not 0 = 1

ledchan : Channel Int
ledchan = channel ()

foo : Int -> ()
foo val =
 let _ = sync (send ledchan val) in
 let nv = not val in
 foo nv

main =
  let _ = spawnExternal ledchan 1 in
  foo 1